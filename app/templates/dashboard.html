{% extends "base.html" %}
{% block content %}

<div class="bg-slate-900/60 border border-slate-800 rounded-2xl p-4 mb-4">
  <div class="flex items-center justify-between">
    <div>
      <div class="text-lg font-semibold">Welcome, {{ user.full_name }}</div>
      <div class="text-sm text-slate-400">{{ user.email }}</div>
    </div>
    <div class="text-sm text-right">
      <div>Role: <span class="font-semibold">{{ user.role }}</span></div>
      <div>Status: <span class="font-semibold">{{ user.status }}</span></div>
      <div class="text-xs text-slate-400">Device: {{ device_id }}</div>
    </div>
  </div>
</div>

<div class="grid md:grid-cols-2 gap-4">
  <div class="bg-slate-900/60 border border-slate-800 rounded-2xl p-4">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold">Slots</h2>
      <span id="slotStatus" class="text-sm text-slate-400">Loading...</span>
    </div>
    <div id="slots" class="mt-4 grid grid-cols-2 gap-3"></div>
  </div>

  <div class="bg-slate-900/60 border border-slate-800 rounded-2xl p-4">
    <div class="flex items-center justify-between">
      <h2 class="text-lg font-semibold">My Bookings</h2>
      <span id="bookingStatus" class="text-sm text-slate-400"></span>
    </div>
    <div id="myBookings" class="mt-4 space-y-3"></div>
  </div>
</div>

<div id="adminSection" class="mt-6 hidden">
  <div class="grid md:grid-cols-2 gap-4">
    <div class="bg-slate-900/60 border border-slate-800 rounded-2xl p-4">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold">Pending Users</h2>
        <span id="adminUsersStatus" class="text-sm text-slate-400"></span>
      </div>
      <div id="pendingUsers" class="mt-4 space-y-3"></div>
    </div>

    <div class="bg-slate-900/60 border border-slate-800 rounded-2xl p-4">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold">Pending Bookings</h2>
        <span id="adminBookingsStatus" class="text-sm text-slate-400"></span>
      </div>
      <div id="pendingBookings" class="mt-4 space-y-3"></div>
    </div>
  </div>

  <div class="bg-slate-900/60 border border-slate-800 rounded-2xl p-4 mt-4">
    <h2 class="text-lg font-semibold mb-3">Admin Controls</h2>
    <div class="flex flex-wrap gap-2">
      <button class="px-3 py-2 rounded-xl bg-sky-600 hover:bg-sky-500 text-sm"
        onclick="window.__cmdOpenGate()">Open Gate</button>
      <button class="px-3 py-2 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-sm"
        onclick="window.__cmdExitApproved(true)">Approve Exit</button>
      <button class="px-3 py-2 rounded-xl bg-slate-800 hover:bg-slate-700 text-sm border border-slate-700"
        onclick="window.__cmdExitApproved(false)">Revoke Exit</button>
    </div>
    <p class="text-xs text-slate-400 mt-2">Booking approval auto-opens gate already.</p>
  </div>
</div>

{% endblock %}
